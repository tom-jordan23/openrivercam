<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900" width="1200" height="900">
  <defs>
    <style>
      .title { font: bold 24px sans-serif; fill: #1a1a1a; }
      .subtitle { font: 14px sans-serif; fill: #666; }
      .section-title { font: bold 14px sans-serif; fill: #333; }
      .component { font: 12px sans-serif; fill: #333; }
      .component-detail { font: 10px sans-serif; fill: #666; }
      .wire-power { stroke: #c00; stroke-width: 3; fill: none; }
      .wire-power-gnd { stroke: #000; stroke-width: 2; fill: none; stroke-dasharray: 5,3; }
      .wire-usb { stroke: #00c; stroke-width: 2; fill: none; }
      .wire-gpio { stroke: #0a0; stroke-width: 1.5; fill: none; }
      .wire-i2c { stroke: #a0a; stroke-width: 1.5; fill: none; }
      .wire-rf { stroke: #f80; stroke-width: 2; fill: none; stroke-dasharray: 8,4; }
      .enclosure { fill: #f5f5f5; stroke: #999; stroke-width: 2; rx: 10; }
      .enclosure-outdoor { fill: #e8f5e9; stroke: #4caf50; stroke-width: 2; rx: 10; }
      .box { fill: #fff; stroke: #333; stroke-width: 1.5; rx: 5; }
      .box-power { fill: #ffebee; stroke: #c00; stroke-width: 1.5; rx: 5; }
      .box-compute { fill: #e3f2fd; stroke: #1976d2; stroke-width: 1.5; rx: 5; }
      .box-camera { fill: #fff3e0; stroke: #f57c00; stroke-width: 1.5; rx: 5; }
      .box-sensor { fill: #f3e5f5; stroke: #7b1fa2; stroke-width: 1.5; rx: 5; }
      .box-ui { fill: #e8f5e9; stroke: #388e3c; stroke-width: 1.5; rx: 5; }
      .connector { fill: #666; }
      .led-green { fill: #4caf50; }
      .led-yellow { fill: #ffc107; }
      .led-red { fill: #f44336; }
      .arrow { fill: #333; }
    </style>
    <!-- Arrowhead marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" class="arrow"/>
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#c00"/>
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#00c"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="900" fill="#fafafa"/>

  <!-- Title -->
  <text x="600" y="35" class="title" text-anchor="middle">Sukabumi River Monitoring Station - System Overview</text>
  <text x="600" y="55" class="subtitle" text-anchor="middle">Solar-Powered USB Camera System | OpenRiverCam Indonesia Spring 2026</text>

  <!-- ==================== -->
  <!-- MAIN ENCLOSURE -->
  <!-- ==================== -->
  <rect x="50" y="80" width="700" height="520" class="enclosure"/>
  <text x="70" y="105" class="section-title">COMPUTE ENCLOSURE (inside existing power box)</text>

  <!-- ==================== -->
  <!-- POWER SECTION -->
  <!-- ==================== -->
  <rect x="70" y="120" width="200" height="180" class="box-power"/>
  <text x="170" y="145" class="section-title" text-anchor="middle">POWER (Existing)</text>

  <!-- Solar Battery -->
  <rect x="90" y="160" width="80" height="50" class="box"/>
  <text x="130" y="182" class="component" text-anchor="middle">12V 50Ah</text>
  <text x="130" y="197" class="component-detail" text-anchor="middle">LiFePO4 Battery</text>

  <!-- Main Fuse -->
  <rect x="90" y="230" width="80" height="30" class="box"/>
  <text x="130" y="250" class="component" text-anchor="middle">F1: 10A Fuse</text>

  <!-- IR Fuse -->
  <rect x="185" y="230" width="70" height="30" class="box"/>
  <text x="220" y="250" class="component" text-anchor="middle">F2: 3A</text>

  <!-- Power connections -->
  <line x1="130" y1="210" x2="130" y2="230" class="wire-power"/>
  <line x1="130" y1="260" x2="130" y2="290" class="wire-power" marker-end="url(#arrowhead-red)"/>
  <line x1="170" y1="185" x2="185" y2="185" class="wire-power"/>
  <line x1="185" y1="185" x2="185" y2="230" class="wire-power"/>
  <line x1="220" y1="260" x2="220" y2="380" class="wire-power"/>

  <!-- ==================== -->
  <!-- COMPUTE STACK -->
  <!-- ==================== -->
  <rect x="290" y="120" width="200" height="280" class="box-compute"/>
  <text x="390" y="145" class="section-title" text-anchor="middle">COMPUTE STACK</text>

  <!-- Witty Pi 5 HAT+ -->
  <rect x="310" y="160" width="160" height="50" class="box"/>
  <text x="390" y="182" class="component" text-anchor="middle">Witty Pi 5 HAT+</text>
  <text x="390" y="197" class="component-detail" text-anchor="middle">Power Mgmt + RTC</text>

  <!-- Raspberry Pi 5 -->
  <rect x="310" y="220" width="160" height="60" class="box"/>
  <text x="390" y="245" class="component" text-anchor="middle">Raspberry Pi 5</text>
  <text x="390" y="262" class="component-detail" text-anchor="middle">4GB/8GB RAM</text>

  <!-- Pi-EzConnect -->
  <rect x="310" y="290" width="160" height="50" class="box"/>
  <text x="390" y="312" class="component" text-anchor="middle">Pi-EzConnect</text>
  <text x="390" y="327" class="component-detail" text-anchor="middle">GPIO Screw Terminals</text>

  <!-- M.2 SSD -->
  <rect x="310" y="350" width="160" height="40" class="box"/>
  <text x="390" y="375" class="component" text-anchor="middle">512GB M.2 SSD + USB</text>

  <!-- Stack connections -->
  <line x1="130" y1="290" x2="310" y2="185" class="wire-power"/>
  <text x="200" y="280" class="component-detail">12V IN</text>

  <!-- Witty to Pi (5V) -->
  <line x1="390" y1="210" x2="390" y2="220" class="wire-power" stroke="#090"/>
  <text x="400" y="218" class="component-detail" fill="#090">5V</text>

  <!-- Pi to SSD (USB) -->
  <line x1="390" y1="280" x2="390" y2="350" class="wire-usb"/>

  <!-- ==================== -->
  <!-- LTE MODEM -->
  <!-- ==================== -->
  <rect x="510" y="120" width="220" height="130" class="box"/>
  <text x="620" y="145" class="section-title" text-anchor="middle">LTE CONNECTIVITY</text>

  <!-- Modem -->
  <rect x="530" y="160" width="120" height="40" class="box"/>
  <text x="590" y="185" class="component" text-anchor="middle">Quectel EG25-G</text>

  <!-- PU201 Adapter -->
  <rect x="530" y="205" width="120" height="30" class="box"/>
  <text x="590" y="225" class="component" text-anchor="middle">PU201 USB Adapter</text>

  <!-- Antennas -->
  <rect x="665" y="160" width="50" height="30" class="box"/>
  <text x="690" y="180" class="component" text-anchor="middle">ANT1</text>
  <rect x="665" y="195" width="50" height="30" class="box"/>
  <text x="690" y="215" class="component" text-anchor="middle">ANT2</text>

  <!-- SMA Bulkheads -->
  <circle cx="740" cy="175" r="8" class="connector"/>
  <circle cx="740" cy="210" r="8" class="connector"/>
  <text x="765" y="195" class="component-detail">SMA</text>
  <text x="765" y="215" class="component-detail">Bulkhead</text>

  <!-- Modem connections -->
  <line x1="470" y1="250" x2="530" y2="220" class="wire-usb"/>
  <text x="490" y="230" class="component-detail" fill="#00c">USB</text>
  <line x1="650" y1="175" x2="665" y2="175" class="wire-rf"/>
  <line x1="650" y1="210" x2="665" y2="210" class="wire-rf"/>
  <line x1="715" y1="175" x2="732" y2="175" class="wire-rf"/>
  <line x1="715" y1="210" x2="732" y2="210" class="wire-rf"/>

  <!-- ==================== -->
  <!-- IR ILLUMINATION -->
  <!-- ==================== -->
  <rect x="70" y="320" width="200" height="180" class="box-camera"/>
  <text x="170" y="345" class="section-title" text-anchor="middle">IR ILLUMINATION</text>

  <!-- USB Relay -->
  <rect x="90" y="360" width="80" height="50" class="box"/>
  <text x="130" y="382" class="component" text-anchor="middle">Numato</text>
  <text x="130" y="397" class="component-detail" text-anchor="middle">USB Relay</text>

  <!-- Barrel Adapter -->
  <rect x="90" y="420" width="80" height="30" class="box"/>
  <text x="130" y="440" class="component-detail" text-anchor="middle">Barrel Adapter</text>

  <!-- IR Light -->
  <rect x="90" y="460" width="160" height="30" class="box"/>
  <text x="170" y="480" class="component" text-anchor="middle">Tendelux AI4 IR 850nm</text>

  <!-- IR connections -->
  <line x1="220" y1="380" x2="170" y2="380" class="wire-power"/>
  <text x="195" y="375" class="component-detail" fill="#c00">12V</text>
  <line x1="130" y1="410" x2="130" y2="420" class="wire-power"/>
  <line x1="130" y1="450" x2="130" y2="460" class="wire-power"/>

  <!-- USB to relay -->
  <line x1="310" y1="270" x2="250" y2="270" class="wire-usb"/>
  <line x1="250" y1="270" x2="250" y2="385" class="wire-usb"/>
  <line x1="250" y1="385" x2="170" y2="385" class="wire-usb"/>
  <text x="260" y="330" class="component-detail" fill="#00c">USB</text>

  <!-- ==================== -->
  <!-- STATUS LEDs -->
  <!-- ==================== -->
  <rect x="510" y="270" width="220" height="130" class="box-ui"/>
  <text x="620" y="295" class="section-title" text-anchor="middle">STATUS DISPLAY</text>

  <!-- LEDs -->
  <circle cx="550" cy="330" r="12" class="led-green"/>
  <text x="575" y="335" class="component">Green: OK/Ready</text>
  <circle cx="550" cy="360" r="12" class="led-yellow"/>
  <text x="575" y="365" class="component">Yellow: Working</text>
  <circle cx="550" cy="390" r="12" class="led-red"/>
  <text x="575" y="395" class="component">Red: Error</text>

  <!-- GPIO connections to LEDs -->
  <line x1="470" y1="310" x2="510" y2="310" class="wire-gpio"/>
  <line x1="510" y1="310" x2="510" y2="330" class="wire-gpio"/>
  <line x1="510" y1="330" x2="538" y2="330" class="wire-gpio"/>
  <line x1="510" y1="360" x2="538" y2="360" class="wire-gpio"/>
  <line x1="510" y1="390" x2="538" y2="390" class="wire-gpio"/>
  <text x="485" y="305" class="component-detail" fill="#0a0">GPIO</text>

  <!-- ==================== -->
  <!-- MAINTENANCE BUTTON -->
  <!-- ==================== -->
  <rect x="510" y="420" width="220" height="70" class="box-ui"/>
  <text x="620" y="445" class="section-title" text-anchor="middle">MAINTENANCE MODE</text>
  <rect x="570" y="455" width="100" height="25" class="box"/>
  <text x="620" y="472" class="component" text-anchor="middle">IP67 Button</text>
  <line x1="510" y1="468" x2="570" y2="468" class="wire-gpio"/>
  <text x="525" y="463" class="component-detail" fill="#0a0">GPIO5</text>

  <!-- ==================== -->
  <!-- RAIN GAUGE (Outdoor) -->
  <!-- ==================== -->
  <rect x="510" y="510" width="220" height="80" class="box-sensor"/>
  <text x="620" y="535" class="section-title" text-anchor="middle">RAIN GAUGE</text>
  <rect x="540" y="545" width="160" height="35" class="box"/>
  <text x="620" y="567" class="component" text-anchor="middle">DFRobot SEN0575</text>

  <!-- I2C to rain gauge -->
  <line x1="470" y1="335" x2="490" y2="335" class="wire-i2c"/>
  <line x1="490" y1="335" x2="490" y2="562" class="wire-i2c"/>
  <line x1="490" y1="562" x2="540" y2="562" class="wire-i2c"/>
  <text x="495" y="450" class="component-detail" fill="#a0a">I2C</text>

  <!-- ==================== -->
  <!-- CAMERA (Outdoor) -->
  <!-- ==================== -->
  <rect x="800" y="80" width="380" height="320" class="enclosure-outdoor"/>
  <text x="820" y="105" class="section-title">OUTDOOR - Camera Assembly</text>

  <!-- Camera Housing -->
  <rect x="820" y="120" width="340" height="200" class="box-camera"/>
  <text x="990" y="145" class="section-title" text-anchor="middle">VA Imaging MVEC167 Housing</text>
  <text x="990" y="165" class="component-detail" text-anchor="middle">(Aluminum, heat dissipation)</text>

  <!-- USB Camera -->
  <rect x="850" y="180" width="150" height="60" class="box"/>
  <text x="925" y="205" class="component" text-anchor="middle">ELP/SVPRO 8MP</text>
  <text x="925" y="222" class="component-detail" text-anchor="middle">IMX179 NoIR USB</text>

  <!-- Gore Vent -->
  <rect x="1020" y="180" width="80" height="40" class="box"/>
  <text x="1060" y="205" class="component" text-anchor="middle">Gore M12</text>
  <text x="1060" y="225" class="component-detail" text-anchor="middle">Vent</text>

  <!-- IR Illuminator (outdoor) -->
  <rect x="850" y="250" width="150" height="50" class="box"/>
  <text x="925" y="272" class="component" text-anchor="middle">Tendelux AI4</text>
  <text x="925" y="292" class="component-detail" text-anchor="middle">IR Illuminator</text>

  <!-- USB Cable -->
  <rect x="820" y="340" width="200" height="30" class="box"/>
  <text x="920" y="360" class="component" text-anchor="middle">Bulgin PX0840 IP67 USB Cable</text>

  <!-- Outdoor connections -->
  <line x1="750" y1="250" x2="800" y2="250" class="wire-usb" marker-end="url(#arrowhead-blue)"/>
  <line x1="800" y1="250" x2="820" y2="250" class="wire-usb"/>
  <line x1="820" y1="250" x2="850" y2="210" class="wire-usb"/>
  <text x="760" y="240" class="component-detail" fill="#00c">USB</text>

  <!-- IR power to outdoor -->
  <line x1="250" y1="475" x2="780" y2="475" class="wire-power"/>
  <line x1="780" y1="475" x2="780" y2="275" class="wire-power"/>
  <line x1="780" y1="275" x2="850" y2="275" class="wire-power" marker-end="url(#arrowhead-red)"/>
  <text x="500" y="468" class="component-detail" fill="#c00">12V (switched)</text>

  <!-- ==================== -->
  <!-- LEGEND -->
  <!-- ==================== -->
  <rect x="800" y="420" width="380" height="180" class="box" fill="#fff"/>
  <text x="990" y="445" class="section-title" text-anchor="middle">LEGEND</text>

  <line x1="820" y1="470" x2="870" y2="470" class="wire-power"/>
  <text x="880" y="475" class="component">12V Power</text>

  <line x1="820" y1="495" x2="870" y2="495" class="wire-usb"/>
  <text x="880" y="500" class="component">USB Connection</text>

  <line x1="820" y1="520" x2="870" y2="520" class="wire-gpio"/>
  <text x="880" y="525" class="component">GPIO Signal</text>

  <line x1="820" y1="545" x2="870" y2="545" class="wire-i2c"/>
  <text x="880" y="550" class="component">I2C Bus</text>

  <line x1="820" y1="570" x2="870" y2="570" class="wire-rf"/>
  <text x="880" y="575" class="component">RF/Antenna</text>

  <rect x="1000" y="460" width="20" height="15" class="enclosure"/>
  <text x="1030" y="472" class="component">Indoor Enclosure</text>

  <rect x="1000" y="485" width="20" height="15" class="enclosure-outdoor"/>
  <text x="1030" y="497" class="component">Outdoor/Weather</text>

  <!-- ==================== -->
  <!-- NOTES -->
  <!-- ==================== -->
  <rect x="50" y="620" width="700" height="270" class="box" fill="#fffde7"/>
  <text x="70" y="645" class="section-title">ASSEMBLY NOTES</text>

  <text x="70" y="670" class="component">1. Stack Order: Pi 5 (bottom) -> Witty Pi 5 HAT+ (middle) -> Pi-EzConnect (top)</text>
  <text x="70" y="690" class="component">2. Apply MG 422C silicone conformal coat to: Pi 5, Witty Pi 5, Pi-EzConnect, Numato relay</text>
  <text x="70" y="710" class="component">3. Mask off: GPIO headers, USB ports, SD card slot, HDMI ports before coating</text>
  <text x="70" y="730" class="component">4. IR relay controlled via systemd service: /etc/systemd/system/ir-relay.service</text>
  <text x="70" y="750" class="component">5. Camera housing: Add Gore M12 vent, NO desiccant (accept ambient humidity)</text>
  <text x="70" y="770" class="component">6. Status LEDs: 330 ohm resistors in series, 10mm IP67 panel mount</text>
  <text x="70" y="790" class="component">7. Maintenance button: Long press (3s) enables WiFi hotspot + SSH access</text>
  <text x="70" y="810" class="component">8. Rain gauge signal board: Mount inside enclosure, protect from humidity</text>

  <text x="70" y="845" class="section-title">GPIO PIN ASSIGNMENTS</text>
  <text x="70" y="865" class="component-detail">GPIO4/17: Witty Pi (reserved) | GPIO17: Green LED | GPIO27: Yellow LED | GPIO22: Red LED</text>
  <text x="70" y="880" class="component-detail">GPIO5: Maintenance button (input, internal pullup) | GPIO2/3: I2C SDA/SCL (rain gauge @ 0x1D)</text>

  <!-- Footer -->
  <text x="600" y="895" class="subtitle" text-anchor="middle">OpenRiverCam - Sukabumi Site | Rev 1.0 | 2026-01-16</text>
</svg>
